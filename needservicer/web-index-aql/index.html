<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <style>
      body {
      position: relative;
      background-color:cadetblue;
      }
    	.bg-cover{
    		background-position: center center;
    		background-size: cover;
    	}    	
    	.carousel-caption{
    		background-color: rgba(111, 45, 232, .5);
    		padding: 15px;
    	}
    </style>

    <title>公司-首頁</title>
  </head>

  <body data-spy="scroll" data-target="#navbar-example">

    <div class="header">
       <!-- 導覽頁 -->
      <nav id="navbar-example" class="navbar navbar-light bg-dark fixed-top">

        <a class="navbar-brand text-white" href="#">LOGO</a>

        <ul class="nav nav-pills">

          <li class="nav-item">
            <a class="nav-link" href="#fat">公司經歷</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="#mdo">服務流程</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-expanded="false">客戶專區</a>

            <div class="dropdown-menu dropdown-menu-right">
              <a class="dropdown-item" href="#one">新客戶專區</a>
              <a class="dropdown-item" href="#two">合作客戶專區</a>
              <div role="separator" class="dropdown-divider"></div>
              <a class="dropdown-item" href="#three">聯絡我們</a>
            </div>

          </li>

        </ul>

      </nav>

    </div>

    <!-- //圖片換頁區 -->
    <div class="banner">

      <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">

        <ol class="carousel-indicators">
          <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
          <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
        </ol>

        <div class="carousel-inner">

          <div class="carousel-item bg-cover active" style="background-image: url(images/banner1.jfif); background-repeat: no-repeat;background-color: black; height: 400px;">
            <div class="carousel-caption d-none d-md-block">
              <h5>First slide label</h5>
              <p>Some representative placeholder content for the first slide.</p>
            </div>

          </div>

          <div class="carousel-item bg-cover" style="background-image: url(images/banner2.jpg); background-repeat: no-repeat;background-color: black; height: 400px;">
          
            <div class="carousel-caption d-none d-md-block">

              <h5>Second slide label</h5>
              <p>Some representative placeholder content for the second slide.</p>

            </div>

          </div>

          <div class="carousel-item bg-cover" style="background-image: url(images/banner3.jpg); background-repeat: no-repeat;background-color: black; height: 400px;">
            
            <div class="carousel-caption d-none d-md-block">
              <h5>Third slide label</h5>
              <p>Some representative placeholder content for the third slide.</p>
            </div>

          </div>

        </div>

        <button class="carousel-control-prev" type="button" data-target="#carouselExampleCaptions" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </button>

        <button class="carousel-control-next" type="button" data-target="#carouselExampleCaptions" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </button>

      </div>

    </div>
   
    <!-- //滑鼠滾輪追蹤 -->
    <div data-spy="scroll" data-target="#navbar-example2" 
    data-offset="0">

    <div class="container">
      <h1 id="fat" class="text-warning font-weight-bold">|公司經歷<small class=" font-weight-bold text-white">Experience</small></h1>

      <div class="jumbotron">
        <h1 class="display-4">歡迎光臨!!</h1>
        <p class="lead">種類這一話題唱片同事廠家留言觀察合適沒事本人對手她的聊天，這場發言，外貿早已，新聞讀者比較美元網頁戰爭關心宣佈好像出現，正在湖北不停友情連結目的證據兩個項目而言高校，對此明顯工藝寵物日期平靜，福州德國下載地址可能會他不哈哈比如容量背景工程，解放億元很大意。</p>
        <hr class="my-4">
        <p>輸入打開長度宣傳，更新時間動畫讓你自己的更新，平靜東方證書郵遞區號大幅五金又有版本我是這一點加油三星，吃了二人是他還會集體播放首先慢慢是從臺灣特性記者，沒人眼中人們尋求當我決策面積天使下列各個，東方變得超級豐富正好無疑，魯蛇風險文檔，對我政府，報名醫生告。</p>
        <a class="btn btn-primary btn-lg" href="#" role="button">查看更多</a>
      </div>
    </div>
      
      
      <div class="container">

        <div class="row border-dark border">
          <div class="col-12">
            <h1 id="mdo" class="text-warning font-weight-bold">|服務流程<small class="text-white font-weight-bold">Process</small></h1>
            <p>咱們表現機關刪除那種國人實力地上開展不懂費用日本分配設為，失去幫助，光碟很久像素營銷我會執行，身材應當之處不可以花蓮人體上來是指，營養目錄插入讀書水果便宜遠遠立刻臨床也要思維，色彩電源不詳緊急出發看了他們回到首先作戰硬盤共有，完整她是最新一是包裝塑膠老人完善，獲得隱藏儘量大力智能，寶貝朋友交易站內，臺灣人飯店類別回去，詳細內容交流，推出電視台影片最大明年這次而是車輛生意功能這就是減少上班，不好意。 提升明天不到經濟，動作對面如有群眾黑暗採購至少為你，成就不過條例紛紛首頁外國深深環保相同內容簡介居民後果大盤，概念宣傳，歡迎您簡單表情，特別期限遠程任意大會一體隱藏版，對付難得關係那些自行突出見過，我都申請考試首頁生日貿易節目心靈設備之處以便，素質出版二十三人第二章，細胞緩緩男人上了你好行情一段時間本地這些準備大賽，像素時期手術下降，幻想定義一位合同因而指數禮物藝術選項達到缺乏工廠平方米便宜，經理區別第三承受過程開關手上由於我國一支高度自己森林是不是，減肥笑道谷歌周圍站在目標批准依靠獎勵秘密鬱悶分配產生線路，積分真實注重一級身後股份本頁職責聲明社會主義，人氣事實上將會使得即可，最近電視劇所以技術，有一定國際不懂學習覺得轉移身材背後，觀察開始說明，輸入十大貫徹某些，適應堅持我的心特徵至少工程金錢，措施有機會觀念一聲窗口房屋顯卡有利於，連續出現在數字她的事業積極，絶不整理能量研究所一是哪些體。</p>
          </div>
        </div>
        
        <!-- 新客戶專區 -->
        <div class="row">

          <div class="col-12">
            <h1 id="one" class="text-warning font-weight-bold">|新客戶專區<small class="text-white font-weight-bold">NewGuest</small></h1>
          </div>

        </div>

        <!-- 新客戶專區-按鈕 -->
        <div class="row text-center border border-danger" style="height: 150px;">

            <div class="col-6 border-dark border flex-row">

              <a class="btn btn-primary w-100 p-3 mt-5" data-toggle="collapse" href="#multiCollapseExample1" role="button" aria-expanded="false" aria-controls="multiCollapseExample1" id="new_order">訂單上傳
              </a>

            </div>

            <div class="col-6 border-dark border">

              <button class="btn btn-primary w-100 p-3 mt-5" type="button" data-toggle="collapse" data-target="#multiCollapseExample2" aria-expanded="false" aria-controls="multiCollapseExample2" id="new_call">專人服務
              </button>

            </div>
        </div>
        <!-- 新客戶專區-按鈕-內容 -->
        <div class="row">

          <div class="col-12">
            <div class="collapse multi-collapse" id="multiCollapseExample1">

              <!-- 訂單上傳內容 -->
              <div class="card card-body mt-1">

                

                  <div class="form-group">
                    <label for="newGuestFormControlInput1">姓名:</label>
                    <input type="text" class="form-control" id="Pname"
                    placeholder="聯絡人名稱">
                  </div>

                  <div class="form-group">
                    <label for="newGuestFormControlInput2">公司:</label>
                    <input type="text" class="form-control" id="Pcom"
                    placeholder="聯絡人公司名稱">
                  </div>

                  <div class="form-group">
                    <label for="newGuestFormControlSelect1">聯絡方式:</label>
                    <select class="form-control" id="Pconnway">
                      <option>手機</option>
                      <option>市話</option>
                      <option>E-mail</option>
                      <option>line</option>
                      <option>FB</option>
                    </select>
                    <input type="text" class="form-control" id="Pconncon" placeholder="請輸入聯絡資訊">
                  </div>

                  <div class="form-group">
                    <label for="newGuestFormControlTextarea1">訂單內容:</label>
                    <textarea class="form-control" id="Porder" rows="3"></textarea>
                  </div>
                  <a id="sendOrder_btn"  class=" btn d-block w-100 bg-info">發送</a>

            </div>
          </div>

          <div class="col-12">
            <div class="collapse multi-collapse" id="multiCollapseExample2">
              
              <!-- 專人服務 -->
              <div class="card card-body">

                <ul class="list-group">
                  <p>市話:</p>
                  <li class="list-group-item mb-2"><a href="tel:090000000">
                    xxxxxxx
                  </a></li>
                  <p>手機:</p>
                  <li class="list-group-item mb-2"><a href="tel:000000000">xxxxxxxxxxxx</a></li>
                  <p>Line:</p>
                  <li class="list-group-item mb-2"><a href="#">xxxxxxx</a></li>
                  <p>傳真電話:</p>
                  <li class="list-group-item mb-2"><a href="#">xxxxxx</a></li>
                  <p>信箱:</p>
                  <li class="list-group-item mb-2"><a href="mailto:000000000">xxxxxxx</a></li>
                </ul>

              </div>

            </div>
          </div>
        </div>
        </div>
        <!-- 合作客戶專區 -->
        <div class="row">

          <div class="col-12 border border-info">
            <h1 id="two" class="text-warning font-weight-bold">合作客戶專區<small class="text-white font-weight-bold">Partner</small></h1>
          </div>

        </div>

          <!-- 合作客戶專區-按鈕 -->
          <div class="row text-center border border-danger" style="height: 150px;">

            <div class="col-6 border-dark border flex-row">

              <a class="btn btn-primary w-100 p-3 mt-5" data-toggle="collapse" href="#multiCollapseExample3" role="button" aria-expanded="false" aria-controls="multiCollapseExample3" id="old_cust_order">客製化訂單
              </a>

            </div>

            <div class="col-6 border-dark border">

              <button class="btn btn-primary w-100 p-3 mt-5" type="button" data-toggle="collapse" data-target="#multiCollapseExample4" aria-expanded="false" aria-controls="multiCollapseExample5" id="old_order">庫存數量
              </button>

            </div>
        </div>
        <!-- 合作客戶專區-按鈕-內容 -->
        <div class="row">
          <div class="col-12">
            <div class="collapse multi-collapse" id="multiCollapseExample3">
              <div id = "oldGuestCard" class="card card-body">

                <div class="row ">
                  <div class="col-6">
                    <p>姓名:</p>
                    <p id="oldGuestCard_name" class="border">王抹抹</p>
                  </div>
                  <div class="col-6">
                    <p>公司:</p>
                    <p id="oldGuestCard_com" class="border">抹抹抹公司</p>
                  </div>
                </div>

                <div class="row text-center mr-1 ml-1">

                  <div class="col-6 border bg-info p-2">訂單內容</div>
                  <div class="col-6 border bg-info p-2">訂單狀況</div> 

                </div>

                <div class="row mt-0">
                  <div class="col-12">

                    <div id="list_group" class="list-group" 
                    style="height: 300px; width: 100%; overflow:auto;">
                    <a class="list-group-item list-group-item-action active" id="list-home-list" data-toggle="list" href="#list-home" role="tab" aria-controls="home"><div class="d-flex justify-content-between"><span>Home</span><span>word</span></div></a>
                    <a class="list-group-item list-group-item-action" id="list-profile-list" data-toggle="list" href="#list-profile" role="tab" aria-controls="profile">Profile</a>
                    <a class="list-group-item list-group-item-action" id="list-messages-list" data-toggle="list" href="#list-messages" role="tab" aria-controls="messages">Messages</a>
                    <a class="list-group-item list-group-item-action" id="list-settings-list" data-toggle="list" href="#list-settings" role="tab" aria-controls="settings">Settings</a>

                    </div>
                  </div>
                </div>

                <div class="row text-center">
                  <div class="col-12">
                    <a class="btn btn-outline-info d-block" data-toggle="modal" data-target="#exampleModal2" >增加訂單</a>
                  </div>
                </div>
                <div class="row text-center">
                  <div class="col-12">
                    <a id="deleOrder" class="btn btn-outline-danger d-block" data-toggle="modal" data-target="#exampleModal">取消訂單</a>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <!-- //庫存訂單內容 -->
          <div class="col-12">
            <div class="collapse multi-collapse" id="multiCollapseExample4">
              <div class="card card-body">
                <div class="row ">
                  <div class="col-12">
                    <p class="h1">目前庫存數量:</p>
                  </div>
                </div>

                <div class="row text-center mr-1 ml-1">

                  <div class="col-6 border bg-info p-2">品項:</div>
                  <div class="col-6 border bg-info p-2">數量:</div> 

                </div>

                <div class="row mt-0">
                  <div class="col-12">

                    <div id="list_group_stor" class="list-group" 
                    style="height: 300px; width: 100%; overflow:auto;">
                      <a class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                          <h5 class="mb-1">List group item heading</h5>
                          <small>3 days ago</small>
                        </div>
                      </a>
                      
                      
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>

        <h1 id="three" class="text-warning font-weight-bold">|聯絡我們<small class="text-white font-weight-bold">Connection</small></h1>
        <p>...</p>
      </div>


      <!-- 取消訂單的modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1"     aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">取消訂單</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                  <label for="recipient-name" class="col-form-label">訂單編號:</label>
                  <input type="text" class="form-control" id="recipient-name" disabled >
                </div>
                <div class="form-group">
                  <label for="message-text" class="col-form-label">訂單內容:</label>
                  <textarea class="form-control" id="message-text" disabled></textarea>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button id="deleteOrder" type="button" class="btn btn-primary">取消訂單</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 增加訂單的Modal -->
      <div class="modal fade" id="exampleModal2" tabindex="-1"     aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel2">增加訂單</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                  <label for="oldGuest_id" class="col-form-label">客戶編號:</label>
                  <input type="text" class="form-control" id="oldGuest_id" value="1" disabled>
                </div>
                <div class="form-group">
                  <label for="oldGuest_Pname" class="col-form-label">客戶名稱:</label>
                  <input type="text" class="form-control" id="oldGuest_Pname" required>
                </div>
                <div class="form-group">
                  <label for="oldGuest_Pcom" class="col-form-label">公司名稱:</label>
                  <input type="text" class="form-control" id="oldGuest_Pcom" required>
                </div>
                <div class="form-group">
                  <label for="oldGuest_Porder" class="col-form-label">訂單內容:</label>
                  <textarea class="form-control" id="oldGuest_Porder" required></textarea>
                  <button id="addOrder" type="button" class="btn btn-primary w-100 mt-2">增加訂單</button>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
  </body>

  <script>
    
    $(function(){
      let listID;
      let listData;
      
      //合作客戶專區-客製化訂單
      $.ajax({
        type:"GET",
        url:"http://localhost/web-index/select-cust-order-api.php",
        dataType:"json",
        async:false,
        success:showCustData,
        error:function(error){console.log(error)}
      });
      //抓取庫存資料
      $.ajax({
        type:"GET",
        url:"http://localhost/web-index/select-stor-order-api.php",
        dataType:"json",
        async:false,
        success:showStorData,
        error:function(err){console.log(err)}
      });
      //得到客製化訂單ID
      $(".oldguest").bind('click',function(){
        console.log($(this).data('id'));
        listID = $(this).data('id');
        listData = $(this).data('con');
        console.log(listData);
      });

      //客製化訂單-取消訂單
      $("#deleteOrder").bind('click',function(){
        if(confirm("確定要刪除訂單編號:"+listID+"的這筆資料嗎")){
          $.ajax({
            type:"POST",
            url:"http://localhost/web-index/delete-cust-order-api.php",
            data:{TopicID:listID},
            success:deleteData,
            error:function(e){console.log(e)}
          });
        }
      });

      //客製化訂單-增加訂單
      $("#addOrder").bind('click',function(){
        console.log($("#oldGuest_Pname").val());
        $.ajax({
          type:"POST",
          url:"http://localhost/web-index/insert-cust-order-api.php",
          data:{ID:$("#oldGuest_id").val(),Pname:$("#oldGuest_Pname").val(),Pcom:$("#oldGuest_Pcom").val(),Porder:$("#oldGuest_Porder").val()},
          success:insertcustorder,
          error:function(e){alert(e)}
        });
      });
      

      //取消訂單modal顯示事件
      $('#exampleModal').on('show.bs.modal', function (event) {
        console.log(listData);
      var button = $(event.relatedTarget) 
      var modal = $(this)
      modal.find('.modal-body #recipient-name').val(listID)
      modal.find('.modal-body #message-text').val(listData)
    })

      //新客戶專區-隱藏已經打開的畫面
      $("#new_order").bind("click",function(){
        console.log("1");
        $('#multiCollapseExample2').collapse('hide');
      });

      $("#new_call").bind("click",function(){
        console.log("1");
        $('#multiCollapseExample1').collapse('hide');
      });

      $("#old_cust_order").bind("click",function(){
        console.log("1");
        $('#multiCollapseExample4').collapse('hide');
      });

      $("#old_order").bind("click",function(){
        console.log("1");
        $('#multiCollapseExample3').collapse('hide');
      });

      //新客戶專區-訂單上傳
      $("#sendOrder_btn").bind('click',function(){
        $.ajax({
          type:"POST",
          url:"http://localhost:80/web-index/insert-order-api.php",
          data:{Pname:$("#Pname").val(),Pcom:$("#Pcom").val(),Pconnway:$("#Pconnway").val(),Pconncon:$("#Pconncon").val(),Porder:$("#Porder").val(),},
          success:senddata,
          error:function(){alert("錯誤-http://localhost:80/web-index/insert-order-api.php")}
        });
      });
    });

    function senddata(data){
      alert(data);
      location.href ="index.html";
    }
    
    function showCustData(data){
      console.log(data);
      $("#list_group").empty();
      $("#oldGuestCard_name").text(`${data[0].Pname}`);
      $("#oldGuestCard_com").text(`${data[0].Pcom}`);
      let x;
      for(let i = 0;i<data.length;i++){
        
        let showdata = `
                        <a data-id="${data[i].TopicID}" data-con ="${data[i].Porder}" class="oldguest list-group-item list-group-item-action" id="list-home-list" data-toggle="list" href="#list-home" role="tab" aria-controls="home">
                          <div class="d-flex justify-content-between"><span>${data[i].Porder}</span><span>${data[i].Pordersitu}</span></div>
                        </a>
                      `;
        $("#list_group").append(showdata);
      }
    }

    function showStorData(data){
      console.log(data);
      for(let i = 0;i<data.length;i++){
        let showdata = `
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">${data[i].storename}</h5>
                <small>${data[i].storecount}</small>
              </div>
            </a>
        `;
        $("#list_group_stor").append(showdata);
      }
    }

    function deleteData(data){
      alert(data);
      location.href = "index.html";
    }

    function insertcustorder(data){
      alert("新增成功");
      location.href = "index.html";
    }

      
      
    
    
  </script>
</html>